(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[962],{9157:(e,t,s)=>{Promise.resolve().then(s.bind(s,2841))},2841:(e,t,s)=>{"use strict";s.d(t,{default:()=>p});var l=s(5155),a=s(2115);let i={0:"Active D-Lighting",1:"AF area mode",3:"Auto bracketing",4:"Bluetooth connection",5:"Monitor/viewfinder brightness",6:"Color space",7:"Choose image area",8:"Custom controls",9:"Shutter type",11:"Exposure compensation",12:"Exposure delay mode",13:"Flash compensation",15:"Focus mode",17:"HDR",19:"High ISO NR",21:"Image quality",22:"Image size",24:"ISO sensitivity settings",25:"Long exposure NR",26:"Apply settings to live view",27:"Metering",29:"Multiple exposure",30:"Peaking highlights",31:"Set Picture Control",32:"Release mode",33:"Silent photography",35:"Vibration reduction",36:"White balance",38:"Wi-Fi connection",39:"View memory card info",40:"Interval timer shooting",41:"Time-lapse movie",42:"Focus shift shooting",51:"Group flash options"},r={},n={iMenuStart:2172,iMenuSlots:12,iMenuStride:4,customButtons:{still:[{id:"still-1",label:"Custom Slot A",offset:2220},{id:"still-2",label:"Custom Slot B",offset:2240},{id:"still-3",label:"Custom Slot C",offset:2340}],playback:[{id:"play-1",label:"Playback Slot A",offset:2424},{id:"play-2",label:"Playback Slot B",offset:2432},{id:"play-3",label:"Playback Slot C",offset:2440}]}},o=(e,t,s)=>{let l=[],a=Math.min(e.byteLength,t+s);for(let s=t;s<a;s+=1){let t=e.getUint8(s);0!==t&&l.push(t)}return String.fromCharCode(...l).trim()},c=(e,t)=>t+4>e.byteLength?null:e.getUint32(t,!0),d=(e,t)=>null==e?"N/A":Object.prototype.hasOwnProperty.call(t,e)?t[e]:"Unknown",x=e=>{let t=new DataView(e),s=o(t,0,16),l=o(t,24,8),a=[];for(let e=0;e<n.iMenuSlots;e+=1){let s=n.iMenuStart+e*n.iMenuStride,l=c(t,s);a.push({slot:e+1,offset:s,id:l,label:d(l,i)})}let x=e=>e.map(e=>{let s=c(t,e.offset);return{slotId:e.id,label:e.label,offset:e.offset,valueId:s,valueLabel:d(s,r)}}),m={still:x(n.customButtons.still),playback:x(n.customButtons.playback)};return{model:s,firmware:l,size:t.byteLength,iMenu:a,customButtons:m}},m=e=>"0x".concat(e.toString(16).padStart(4,"0")),h=e=>{let{title:t,subtitle:s}=e;return(0,l.jsxs)("div",{className:"mb-6",children:[(0,l.jsx)("p",{className:"text-xs uppercase tracking-[0.4em] text-gray-500",children:s}),(0,l.jsx)("h2",{className:"mt-2 text-2xl font-semibold md:text-3xl",children:t})]})},u=e=>{let{label:t,value:s}=e;return(0,l.jsxs)("div",{className:"flex flex-wrap items-baseline gap-x-4 gap-y-1 text-sm text-gray-300",children:[(0,l.jsx)("span",{className:"text-xs uppercase tracking-[0.3em] text-gray-500",children:t}),(0,l.jsx)("span",{className:"font-medium text-gray-100",children:null==s||""===s?"N/A":s})]})};function p(){let[e,t]=(0,a.useState)(null),[s,i]=(0,a.useState)(null),[r,n]=(0,a.useState)(""),o=async e=>{if(e){n(""),i(null);try{let s=await e.arrayBuffer();t({name:e.name,size:"".concat(Math.round(e.size/1024)," KB")}),i(x(s))}catch(e){n("設定ファイルの読み込みに失敗しました。別のファイルでお試しください。")}}},c=(0,a.useMemo)(()=>(null==s?void 0:s.iMenu)?s.iMenu.map(e=>({...e,hex:m(e.offset)})):[],[s]),d=(0,a.useMemo)(()=>(null==s?void 0:s.customButtons)?[{title:"撮影時カスタムボタン",hint:"サンプルファイルから推定したオフセットを使用しています。",items:s.customButtons.still.map(e=>({...e,hex:m(e.offset)}))},{title:"再生時カスタムボタン",hint:"オフセットは暫定です。必要に応じて調整してください。",items:s.customButtons.playback.map(e=>({...e,hex:m(e.offset)}))}]:[],[s]);return(0,l.jsx)("div",{className:"min-h-screen bg-black text-white",children:(0,l.jsxs)("div",{className:"relative overflow-hidden",children:[(0,l.jsx)("div",{className:"pointer-events-none absolute inset-0 opacity-30",children:(0,l.jsx)("div",{className:"absolute inset-0",style:{backgroundImage:"radial-gradient(circle at 20% 20%, rgba(255,255,255,0.12), transparent 45%), radial-gradient(circle at 80% 10%, rgba(255,255,255,0.08), transparent 40%)"}})}),(0,l.jsxs)("div",{className:"container relative mx-auto px-4 pb-16 pt-12 md:pt-16",children:[(0,l.jsx)(h,{title:"Nikon Z9 Settings Visualizer",subtitle:"Z9 Settings"}),(0,l.jsx)("p",{className:"max-w-2xl text-sm text-gray-300",children:"Z9の設定ファイル（NCSET010.BIN）を読み込み、iメニューとカスタムボタンの設定を可視化します。 現在は提供されたサンプルを基にオフセットを推定しています。"}),(0,l.jsxs)("div",{className:"mt-8 grid gap-6 lg:grid-cols-[1.1fr_1fr]",children:[(0,l.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-6",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold",children:"設定ファイルを読み込む"}),(0,l.jsx)("p",{className:"mt-2 text-xs text-gray-400",children:"保存済みの設定ファイル（NCSET010.BIN）を選択してください。"}),(0,l.jsxs)("label",{className:"mt-6 flex cursor-pointer flex-col items-start gap-3 rounded-xl border border-dashed border-white/20 bg-black/40 px-4 py-6 transition hover:border-white/40",children:[(0,l.jsx)("span",{className:"text-sm text-gray-200",children:"ファイルを選択"}),(0,l.jsx)("span",{className:"text-xs text-gray-500",children:"またはドラッグ＆ドロップ"}),(0,l.jsx)("input",{type:"file",accept:".BIN,.bin",className:"hidden",onChange:e=>{var t;return o(null===(t=e.target.files)||void 0===t?void 0:t[0])}})]}),e&&(0,l.jsx)("div",{className:"mt-4 rounded-lg border border-white/10 bg-black/60 px-4 py-3 text-sm text-gray-300",children:(0,l.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[(0,l.jsx)("span",{className:"font-medium text-gray-100",children:e.name}),(0,l.jsx)("span",{className:"text-xs text-gray-500",children:e.size})]})}),r&&(0,l.jsx)("p",{className:"mt-4 text-sm text-red-400",children:r})]}),(0,l.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-6",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold",children:"読み取り結果"}),(0,l.jsxs)("div",{className:"mt-4 space-y-3",children:[(0,l.jsx)(u,{label:"Model",value:null==s?void 0:s.model}),(0,l.jsx)(u,{label:"Firmware",value:null==s?void 0:s.firmware}),(0,l.jsx)(u,{label:"Bytes",value:(null==s?void 0:s.size)?"".concat(s.size.toLocaleString()," bytes"):null})]})]})]}),(0,l.jsxs)("div",{className:"mt-12 grid gap-8 lg:grid-cols-[1.2fr_1fr]",children:[(0,l.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-6",children:[(0,l.jsx)(h,{title:"iメニュー",subtitle:"I Menu"}),(0,l.jsxs)("div",{className:"grid grid-cols-3 gap-3 sm:grid-cols-4",children:[c.map(e=>{var t;return(0,l.jsxs)("div",{className:"flex flex-col gap-2 rounded-xl border border-white/10 bg-black/50 p-3",children:[(0,l.jsxs)("span",{className:"text-[10px] uppercase tracking-[0.3em] text-gray-500",children:["Slot ",e.slot]}),(0,l.jsx)("span",{className:"text-sm font-semibold text-gray-100",children:e.label}),(0,l.jsxs)("span",{className:"text-xs text-gray-400",children:["ID ",null!==(t=e.id)&&void 0!==t?t:"N/A"," \xb7 ",e.hex]})]},e.slot)}),!c.length&&(0,l.jsx)("p",{className:"col-span-full text-sm text-gray-400",children:"まだデータがありません。設定ファイルを読み込んでください。"})]})]}),(0,l.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-6",children:[(0,l.jsx)(h,{title:"カスタムボタン",subtitle:"Custom Buttons"}),(0,l.jsxs)("div",{className:"space-y-6",children:[d.map(e=>(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-base font-semibold",children:e.title}),(0,l.jsx)("p",{className:"text-xs text-gray-400",children:e.hint})]}),(0,l.jsx)("div",{className:"grid gap-3",children:e.items.map(e=>{var t;return(0,l.jsxs)("div",{className:"flex flex-col gap-1 rounded-xl border border-white/10 bg-black/50 p-3",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,l.jsx)("span",{className:"text-sm font-semibold text-gray-100",children:e.label}),(0,l.jsx)("span",{className:"text-xs text-gray-500",children:e.hex})]}),(0,l.jsxs)("span",{className:"text-xs text-gray-300",children:[e.valueLabel," (ID ",null!==(t=e.valueId)&&void 0!==t?t:"N/A",")"]})]},e.slotId)})})]},e.title)),!d.length&&(0,l.jsx)("p",{className:"text-sm text-gray-400",children:"まだデータがありません。設定ファイルを読み込んでください。"})]})]})]})]})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[441,517,358],()=>t(9157)),_N_E=e.O()}]);